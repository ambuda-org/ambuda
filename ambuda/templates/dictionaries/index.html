{% extends 'header-main-footer.html' %}
{% import "macros/components.html" as mc %}
{% import 'macros/dictionaries.html' as m %}


{% block title %}{{ mc.title(_('Dictionaries')) }}{% endblock %}


{% block meta_description -%}
Our fast and simple dictionary toor supports six popular dictionaries in three
different languages.
{%- endblock %}


{% macro dictionary_form() %}
<form
    id="dict--form"
    class="mb-4"
    @submit.prevent="searchDictionary">
  <div class="flex mb-2">
    <input
        name="q"
        type="text"
        placeholder="{{ _('राम, ರಾಮ, rāma, rAma, ...') }}"
        class="p-2 flex-1 bg-zinc-100 rounded-tl rounded-bl"
        x-model="query"
    >
    </input>
    <input type="submit" value="{{ _('Search') }}"
        class="cursor-pointer bg-zinc-800 text-white p-2 rounded-tr rounded-br"></input>
  </div>
  <select
      id="dict--version"
      name="version"
      class="text-sm bg-zinc-100
      text-zinc-400 hover:text-zinc-800 p-1"
      x-model="source"
      @change="updateSource">
    {% include "include/dict-options.html" %}
  </select>
  <select
      id="dict--script"
      class="text-sm bg-zinc-100 text-zinc-400 hover:text-zinc-800 p-1"
      x-model="uiScript"
      @change="updateScript">
    {% include 'include/script-options.html' %}
  </select>
</form>
{% endmacro %}


{% macro dictionary_response(query, entries) %}
<div id="dict--response">
{% if query or entries %}
  {% with query=query, entries=entries %}
    {% include "htmx/dictionary-results.html" %}
  {% endwith %}
{% else  %}
  {% include 'include/dictionary-help.html' %}
{% endif %}
</div>
{% endmacro %}


{% block main %}
<article class="p-4 md:p-0 max-w-4xl mx-auto md:px-2 md:my-24 md:mb-36">

<h1 class="text-xl font-bold my-4">{{ _('Dictionary lookup') }}</h1>

<div x-data="dictionary" class="lg:flex">
  <div class="flex-1 max-w-[700px]">
    {{ dictionary_form() }}
    {{ dictionary_response(query, entries) }}
  </div>

  <div class="text-sm
      bg-slate-100 rounded p-2 overflow-hidden
      mt-4 lg:mt-0 lg:ml-4 lg:w-48">
    <h3 class="font-bold text-slate-500 mb-2">{{ _('History') }}</h3>
    <ul x-cloak class="a-hover-underline" x-if="history.length">
      <template x-for="q in history.slice().reverse()">
        <li><a href="#" x-text="q" @click.prevent="searchFor(q)"></a></li>
      </template>
    </ul>
  </div>
</div>
</article>
{% endblock %}

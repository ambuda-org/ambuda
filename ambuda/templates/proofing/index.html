{% extends 'proofing/base-sidebar.html' %}
{% import "macros/proofing.html" as m %}


{% macro _badge(bg) %}
<span class="inline-block rounded-full border w-4 h-4 mr-1 {{ bg }}"></span>
{% endmacro %}


{% macro status_legend() %}
<ul class="text-xs bg-slate-100 my-4 grid grid-cols-2 md:flex">
  <li class="p-2 flex items-center">{{ _badge("bg-red-200 border-red-400") }} Needs proofing</li>
  <li class="p-2 flex items-center">{{ _badge("bg-yellow-200 border-yellow-400") }} Proofed once</li>
  <li class="p-2 flex items-center">{{ _badge("bg-green-200 border-green-400") }} Proofed twice</li>
  <li class="p-2 flex items-center">{{ _badge("bg-gray-200 border-gray-400") }} Not relevant</li>
</ul>
{% endmacro %}



{% block title %}Proofing | Ambuda{% endblock %}


{% block sidebar %}{{ m.main_nav('projects') }}{% endblock %}


{% block content %}
<div class="prose">
<h1 class="md:!mt-0">Ongoing projects</h1>
</div>
{{ status_legend() }}

<ul>
  {% for p in projects %}
  <li>
    <div class="mt-4 a-hover-underline flex justify-between items-baseline">
      <a href="{{ url_for("proofing.project.summary", slug=p.slug) }}">{{ p.title }}</a>
      <span class="text-xs">({{ all_page_counts[p.slug] }} pages)</span>
    </div>

    <div class="flex">
    {% for cls, width in all_counts[p.slug].items() %}
      <div class="h-1 {{ cls }}" style="width: {{ width * 100 }}%"></div>
    {% endfor %}
    </div>

    {% if p.description %}
    <section class="mt-2 text-slate-600 text-sm">
      {{ p.description|markdown|safe }}
    </section>
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% endblock %}

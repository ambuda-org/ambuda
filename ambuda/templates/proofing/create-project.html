{% extends 'proofing/base-sidebar.html' %}

{% import "macros/components.html" as components %}
{% import "macros/proofing.html" as m %}
{% import "macros/talk.html" as m_talk %}
{% import "macros/forms.html" as mf %}


{% macro step(n, text) %}
<h2 class="text-2xl mt-8 mb-4 pb-2 border-b"><span class="font-bold">Step {{ n }}</span> &mdash; {{ text }}</h2>
{% endmacro %}

{% macro _radio(name, n, model, value, text) %}
<div class="flex items-center">
  <input class="w-4 mr-2" id="{{ name }}-{{ n }}"
      name="{{ name }}" type="radio" value="{{ value }}" x-model="{{ model }}" @>
  <label class="cursor-pointer text-lg" for="{{ name }}-{{ n }}">{{ text }}</label>
</div>
{% endmacro %}


{% block title %}Create project | Ambuda{% endblock %}


{% block sidebar %}{{ m.main_nav('create') }}{% endblock %}


{% block content %}
{{ m.title_and_subtitle(
    "Create a project",
    "Use our simple uploader to create a new proofing project.") }}


{{ components.flash_messages() }}
{{ mf.show_errors_if_any(form.errors) }}

<form action="" method="POST" enctype="multipart/form-data" x-data="projectUploader">
{{ form.csrf_token }}

{{ step(1, "Learn") }}

<div class="prose">
<p>At Ambuda, we're interested in any book that has some connection to Sanskrit
literature. This includes:</p>

<ul>
  <li>original texts</li>
  <li>commentaries</li>
  <li>translations</li>
  <li>dictionaries</li>
  <li>grammar books</li>
</ul>

<p>And anything else you think is relevant.</p>

<p>To avoid duplicating effort, we suggest that you first check the Internet
carefully to see if your book has been digitized elsewhere already. Try
searching for exact words and phrases from the book.</p>
</div>


{{ step(2, "Upload") }}

<div class="prose">
<p>Right now, our uploader supports PDF documents only. Where is your PDF
coming from?</p>

{% set radios = form.pdf_source|list %}
<fieldset class="p-4 bg-slate-100">
  {{ _radio("pdf_source", "0", "source", "archive.org", "From archive.org") }}
  <div class="my-4" x-show="source === 'archive.org'">
    <p>We'll fetch the PDF for you from archive.org. To do so, we need the
    PDF's <dfn>identifier</dfn>, which is the short text ID that follows
    <kbd>/details/</kbd> in the URL.</p>

    <div class="p-2 bg-slate-100">
    <kbd>https://archive.org/details/</kbd><input class="rounded border p-1" type="text" placeholder="charucharya_hindi"></input>
    </div>
  </div>

  {{ _radio("pdf_source", "1", "source", "my-computer", "From my computer") }}
  <div class="my-4" x-show="source === 'my-computer'">
    <p>We'll copy the PDF from your computer. Please use the form below to find
    a PDF on your computer:</p>

    <div class="p-4 my-2 bg-slate-100">
      {{ form.file }}
    </div>

    <p class="my-2">We also need a title for this PDF:</p>
    {{ form.title(class_="p-2 block w-full", placeholder="My cool title") }}
  </div>
</fieldset>
</div>

{{ step(3, "Verify") }}

<div class="prose">
<p>As best as you can tell, what is the license of this book?</p> 
</div>

<fieldset class="p-4 bg-slate-100 my-4">
  {{ _radio("license", "0", "license", "public", "Public domain") }}

  <div class="prose ml-6 mt-4">
  <p>The following books are in the public domain:</p>

  <ul>
    <li>Books published in India on or before 1957.</li>
    <li>Books published in the United States on or before 1927.</li>
  </ul>
  </div>

  {{ _radio("license", "2", "license", "scholarly", "Copyrighted (personal and scholarly use only)") }}

  <div class="prose ml-6 mt-4">
  <p>We accept copyrighted texts only under the following terms:</p>

  <ul>
    <li>The text is made available for personal or scholarly purposes only.</li>
    <li>We will remove the project if the copyright holder requests it.</li>
  </ul>
  </div>

  {{ _radio("license", "3", "license", "other", "Other") }}

  <div class="prose ml-6 mt-4" x-show="license === 'other'">
  <p>If this project falls under some other license, please say more about the
  usage terms here:</p>

  <textarea class="block w-full h-32 rounded my-4"></textarea>
  </div>


</fieldset>

  <input class="block btn btn-submit" type="submit" value="Upload PDF">
</form>
{% endblock %}
